require('util').inspect.defaultOptions.depth = null

const PB = require('..')

const orig = PB.fromHex(
    '10001a2a312d3932396130646361306565653535353133323830313731613835383564613764636433373030663822e3010abf010a4567656e657269635f7838362f676f6f676c655f73646b5f7838362f67656e657269635f7838363a342e342e322f4b4b2f333037393138333a656e672f746573742d6b657973120672616e6368751a0b67656e657269635f7838362a07756e6b6e6f776e320e616e64726f69642d676f6f676c654085b586064a0b67656e657269635f78383650135a19416e64726f69642053444b206275696c7420666f72207838366207756e6b6e6f776e6a0e676f6f676c655f73646b5f7838367000100032063331303236303a06333130323630420b6d6f62696c653a4c54453a48003205656e5f555338f0b4dfa6b99ab8838e01520f3335383234303035313131313131305a006210416d65726963612f4e65775f596f726b70037a1c37315136526e3244445a6c317a50445661616545484974642b59673da00100b00100')

const mod = orig.toInput().keepDefault()

mod.string(3, 'changed string')
mod.message(42, (m) => m.string(1, 'new sub message'))
mod.editMessage(4, (m) => {
    m.string(8, 'changed string in sub message')
})

console.log(mod.toHex())
